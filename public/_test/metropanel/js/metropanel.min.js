/* MetroPanel by SONHlab.com - version 1.1 */
(function(a){var b=function(b,c){function B(a){return decodeURIComponent(((new RegExp("[?|&]"+a+"="+"([^&;]+?)(&|#|;|$)")).exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}function C(b,c){s["display"]="block";a("#mp-footerpanel").append("<div id='mp-collapse'></div>","<div id='mp-togglemenus'></div>");if(e=="right"){if(d.mpState==1){s["right"]="0px";a("#mp-expand").css({right:"-70px"})}else{s["right"]="-"+c+"px";if(d.contentPosition=="related"){a("#mp-contentholder").css({right:"-"+c+"px"})}a("#mp-expand").css({right:"0px"})}a("#mp-collapse").addClass("mp-rightarrow");a("#mp-togglemenus").addClass("mp-leftarrow")}else{if(d.mpState==1){s["left"]="0px";a("#mp-expand").css({left:"-70px"})}else{s["left"]="-"+c+"px";if(d.contentPosition=="related"){a("#mp-contentholder").css({left:"-"+c+"px"})}a("#mp-expand").css({left:"0px"})}a("#mp-collapse").addClass("mp-leftarrow");a("#mp-togglemenus").addClass("mp-rightarrow")}if(a("#mp-contentholder").height()>a(window).height()){f=a("#mp-contentholder").height()}else{f=a(window).height()}s["height"]=f;t["height"]=f;s["background"]=d.mpMainItemBg;t["background"]=d.mpSubmenuBg;a(b).css(s);a("#mp-menus").css({height:j});a("#mp-footerpanel").css({background:d.mpMainItemBg});a("#mp-expand").css({background:d.mpMainItemBg});a("#mp-submenusholder").css(t);a("#mp-submenus").css({height:a(window).height()});a("#mp-contentholder").css(z)}function D(b,c,d,e){if(c=="slideUp"){a(b).css({top:h});a(b).animate({top:"0px"},d,e,function(){a("#mp-loading").css({display:"none"})})}else if(c=="slideDown"){a(b).css({bottom:h});a(b).animate({bottom:"0px"},d,e,function(){a("#mp-loading").css({display:"none"})})}else if(c=="slideLeft"){a(b).css({left:i});a(b).animate({left:"0px"},d,e,function(){a("#mp-loading").css({display:"none"})})}else if(c=="slideRight"){a(b).css({right:i});a(b).animate({right:"0px"},d,e,function(){a("#mp-loading").css({display:"none"})})}else{a(b).fadeIn(d,function(){a("#mp-loading").css({display:"none"})})}}function E(){a("#mp-contentholder").contents().appendTo("#"+$contentpakage);F("#mp-contentholder");a(".mp-loadingcontent").toggleClass("mp-loadcontent mp-loadingcontent");$contentpakage=n;$pause=false}function F(b){if(a("#"+n).length>0){a("#mp-loading").css(A);a("#"+n).contents().appendTo(b);D(b,d.contentEffect,d.contentEffectDuration,r)}else if(!a("#"+n).length){a("#mp-loading").css(A);a("#mp-contentStation").append("<div id='"+n+"'></div>");a.ajax({url:o,type:"POST",data:"",cache:false,success:function(c){if(c){if(a("#"+n).length>0){a("#"+n).append(c);a("#"+n).contents().appendTo(b);D(b,d.contentEffect,d.contentEffectDuration,r)}}}})}}var d=a.extend({},a.fn.metropanel.defaults,c);$pause=false;var e=d.mpPosition;var f;var g=a("#metropanel").outerWidth();var h=a("#mp-contentholder").outerHeight();var i=a(document).width();var j=d.MainItemDisplay*68;var k;var l;var m;var n;var o;var p=0;var q="swing";var r="swing";var s={};var t={};t[e]="0px";var u={};u["display"]="block";u[e]="0px";var v={};var w={};var x={};var y={};var z={};if(d.contentPosition=="related"){z["margin-"+e]=g+"px";z["float"]=e}else{z["margin"]="auto"}var A={};A["display"]="block";A[e]="320px";$contentpakage=B("mpid");a("#mp-contentholder").fadeIn(400,C(b,g));a("a[data-mpid='"+$contentpakage+"']").addClass("mp-active "+d.mpActiveItem);a(b).delegate(".mp-loadingcontent","click",function(){return false});a(b).on("click",".mp-loadcontent",function(){if(!a(this).hasClass("mp-active")){$pause=true;a(".mp-loadcontent").toggleClass("mp-loadcontent mp-loadingcontent");a(".mp-loadingcontent").removeClass("mp-active "+d.mpActiveItem);l=a(this).attr("href");n=a(this).attr("data-mpid");o="content/"+n+".php";a(this).addClass("mp-active "+d.mpActiveItem);if(d.contentEffect=="slideUp"){a("#mp-contentholder").animate({top:"-"+h},d.contentEffectDuration,q,function(){E()})}else if(d.contentEffect=="slideDown"){a("#mp-contentholder").animate({bottom:"-"+h},d.contentEffectDuration,q,function(){E()})}else if(d.contentEffect=="slideLeft"){a("#mp-contentholder").animate({left:"-"+i},d.contentEffectDuration,q,function(){E()})}else if(d.contentEffect=="slideRight"){a("#mp-contentholder").animate({right:"-"+i},d.contentEffectDuration,q,function(){E()})}else{a("#mp-contentholder").fadeOut(d.contentEffectDuration,function(){E()})}if(l!=window.location){window.history.pushState({path:l},"",l)}}return false});a("#mp-submenus").on("click",".mp-loadcontent",function(){if(a(this).hasClass("mp-loadcontent")){$pause=true;a(".mp-loadcontent").toggleClass("mp-loadcontent mp-loadingcontent");a(".mp-loadingcontent").removeClass("mp-active "+d.mpActiveItem);l=a(this).attr("href");n=a(this).attr("data-mpid");o="content/"+n+".php";if(p==1){y[e]="0px";a("#mp-submenusholder").animate(y,400,"swing",function(){if(e=="left"){a("#mp-togglemenus").toggleClass("mp-minus mp-rightarrow");a(".mp-minus").css({"float":"right"})}else{a("#mp-togglemenus").toggleClass("mp-minus mp-leftarrow");a(".mp-minus").css({"float":"left"})}a("#mp-submenusholder").css({display:"none"});p=0})}if(!a("#mp-recentitemholder > li").hasClass("mp-recentitem")){a("#mp-recentitemholder").append("<li id='mp-ri-"+n+"' class='mp-recentitem'></li>");a(this).removeClass(d.mpHoverItem);a(this).parent().contents().clone().appendTo("#mp-ri-"+n);a(this).parent().addClass("mp-selecteditem");a("a[data-mpid='"+n+"']").addClass("mp-active "+d.mpActiveItem)}else{a("#mp-recentitemholder > li").remove();a(".mp-submenu").removeClass("mp-selecteditem");a("#mp-recentitemholder").append("<li id='mp-ri-"+n+"' class='mp-recentitem'></li>");a(this).removeClass(d.mpHoverItem);a(this).parent().contents().clone().appendTo("#mp-ri-"+n);a(this).parent().addClass("mp-selecteditem");a("a[data-mpid='"+n+"']").addClass("mp-active "+d.mpActiveItem)}if(d.contentEffect=="slideUp"){a("#mp-contentholder").animate({top:"-"+h},d.contentEffectDuration,q,function(){E()})}else if(d.contentEffect=="slideDown"){a("#mp-contentholder").animate({bottom:"-"+h},d.contentEffectDuration,q,function(){E()})}else if(d.contentEffect=="slideLeft"){a("#mp-contentholder").animate({left:"-"+i},d.contentEffectDuration,q,function(){E()})}else if(d.contentEffect=="slideRight"){a("#mp-contentholder").animate({right:"-"+i},d.contentEffectDuration,q,function(){E()})}else{a("#mp-contentholder").fadeOut(d.contentEffectDuration,function(){E()})}if(l!=window.location){window.history.pushState({path:l},"",l)}return false}});a(window).on("resize",function(){if($pause==false){C(b,g);v[e]="-70px";a("#mp-expand").animate(v,0,"swing",function(){x[e]="0px";a("#metropanel, #mp-contentholder").animate(x,0,"swing",function(){a("#mp-footerpanel").css(u)})});if(p==1){y[e]="0px";a("#mp-submenusholder").css(y);if(e=="left"){a("#mp-togglemenus").removeClass("mp-minus");a("#mp-togglemenus").addClass("mp-rightarrow");a(".mp-minus").css({"float":"right"})}else{a("#mp-togglemenus").removeClass("mp-minus");a("#mp-togglemenus").addClass("mp-leftarrow");a(".mp-minus").css({"float":"left"})}a("#mp-submenusholder").css({display:"none"});p=0}}});a(".mp-menu").hover(function(){a(this).find("a").addClass(d.mpHoverItem)},function(){a(this).find("a").removeClass(d.mpHoverItem)});a(".mp-submenu").hover(function(){a(this).find("a").addClass(d.mpHoverItem)},function(){a(this).find("a").removeClass(d.mpHoverItem)});a("#mp-collapse").click(function(){a("#mp-footerpanel").css({display:"none"});w[e]="-"+g+"px";var b;if(d.contentPosition=="related"){k="#metropanel, #mp-contentholder, #mp-submenusholder";b=3}else{k="#metropanel, #mp-submenusholder";b=2}a(k).animate(w,200,"easeOutBack",function(){v[e]="0px";a("#mp-expand").animate(v,200,"easeOutBack",function(){if(a("#mp-togglemenus").hasClass("mp-minus")){if(e=="left"){a("#mp-togglemenus").toggleClass("mp-minus mp-rightarrow")}else{a("#mp-togglemenus").toggleClass("mp-minus mp-leftarrow")}a("#mp-submenusholder").css({display:"none"});p=0}})})});a("#mp-expand").click(function(){v[e]="-70px";a("#mp-expand").animate(v,200,"swing",function(){x[e]="0";a("#metropanel, #mp-contentholder").animate(x,400,"swing",function(){a("#mp-footerpanel").css(u)})})});a("#mp-togglemenus").click(function(){if(p==1){y[e]="0px";a("#mp-submenusholder").animate(y,400,"swing",function(){if(e=="left"){a("#mp-togglemenus").toggleClass("mp-minus mp-rightarrow");a(".mp-minus").css({"float":"right"})}else{a("#mp-togglemenus").toggleClass("mp-minus mp-leftarrow");a(".mp-minus").css({"float":"left"})}a("#mp-submenusholder").css({display:"none"});p=0})}else{y[e]=g+"px";a("#mp-submenusholder").css({display:"block"});a("#mp-submenusholder").animate(y,400,"swing",function(){if(e=="left"){a("#mp-togglemenus").toggleClass("mp-rightarrow mp-minus");a(".mp-minus").css({"float":"right"})}else{a("#mp-togglemenus").toggleClass("mp-leftarrow mp-minus");a(".mp-minus").css({"float":"left"})}p=1})}});a("#mp-menus").jScrollPane({showArrows:false,maintainPosition:false,autoReinitialise:true}).data("jsp");a(".mp-menu").hover(function(){a("#mp-menus").find(".jspDrag").addClass(d.MainListScrollBarStyle)},function(){a("#mp-menus").find(".jspDrag").removeClass(d.MainListScrollBarStyle)});a("#mp-submenus").jScrollPane({showArrows:false,maintainPosition:false,autoReinitialise:true}).data("jsp");a("#mp-submenus li").hover(function(){a("#mp-submenus").find(".jspDrag").addClass(d.SubmenuScrollBarStyle)},function(){a("#mp-submenus").find(".jspDrag").removeClass(d.SubmenuScrollBarStyle)})};a.fn.metropanel=function(c){return this.each(function(d,e){if(a(this).data("metropanel"))return a(this).data("metropanel");var f=new b(this,c);a(this).data("metropanel",f)})};a.fn.metropanel.defaults={mpPosition:"left",mpMainItemBg:"#016C38",mpSubmenuBg:"#004D60",mpActiveItem:"transparent-smoke",mpHoverItem:"transparent-black",contentPosition:"center",contentEffect:"fade",contentEffectDuration:400,easingIn:"swing",easingOut:"swing",mpState:1,MainListScrollBarStyle:"transparent-smoke",SubmenuScrollBarStyle:"transparent-smoke",MainItemDisplay:4}})(jQuery)